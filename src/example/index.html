<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test WebPage</title>
    <script
        data-apiKey="YOUR API KEY HERE!!!!!"
        data-env="staging"
        data-appname="Test Synkrony Pay" 
        type="module" src="https://test.cdn.affidaty.net/pay-component/build/affidaty-pay-component.esm.js"></script>
</head>
<body>
    <div style="display: flex; width: 100vw; height: 100vh; align-items: center; justify-content: center; flex-direction: column;">
        <div class="sm:flex">
            <div class="mb-4 flex-shrink-0 sm:mb-0 sm:mr-4">
            </div>  
        </div>
        <svg  version="1.1" id="Livello_1" xmlns="http://www.w3.org/2000/svg" style="width: 180px;height: 18px;margin-bottom: 30px;"  >
            <style type="text/css">
            .st0{fill:#434343;}
            .st1{fill:#05E091;}
            </style>
            <g id="SYNKRONY_PAY" transform="translate(91 25)">
            <g>
                <g>
                <path class="st0" d="M-88.1-7.9c-0.9-0.2-1.6-0.6-2.1-1s-0.8-1-0.8-1.6v-2.9h0.7c0.2,1.7,0.8,2.9,1.6,3.7
                    c0.8,0.8,1.9,1.1,3.3,1.1c1,0,1.7-0.2,2.3-0.6c0.6-0.4,0.8-1,0.8-1.8c0-0.7-0.2-1.2-0.6-1.7c-0.4-0.5-1.1-1-2-1.5l-3.1-1.9
                    c-1.1-0.6-1.9-1.3-2.4-2c-0.5-0.7-0.7-1.5-0.7-2.5c0-1.3,0.5-2.4,1.5-3.1s2.4-1.1,4.1-1.1c0.9,0,1.8,0.1,2.7,0.4
                    c0.9,0.2,1.6,0.6,2.1,1c0.5,0.5,0.8,1,0.8,1.6v2.9h-0.7c-0.3-1.7-0.8-2.9-1.6-3.7c-0.8-0.8-1.8-1.1-3.1-1.1
                    c-0.9,0-1.6,0.2-2.1,0.7c-0.5,0.4-0.8,1-0.8,1.8c0,0.6,0.2,1.2,0.6,1.6s1.1,0.9,2,1.4l3.1,1.8c1.2,0.7,2,1.4,2.5,2
                    c0.5,0.6,0.8,1.4,0.8,2.3c0,1.4-0.5,2.6-1.6,3.4c-1.1,0.8-2.6,1.2-4.6,1.2C-86.3-7.6-87.2-7.7-88.1-7.9L-88.1-7.9z"/>
                <path class="st0" d="M-71.2-14.6l-4.4-6.7c-0.5-0.7-1.1-1.3-1.6-1.9c-0.6-0.5-1.2-0.8-1.7-0.9v-0.5h2.7c0.9,0,1.6,0.3,2.3,0.8
                    c0.7,0.5,1.3,1.2,1.8,1.9l3.4,5.1l4.9-7.9h1.6l-5.7,9.2V-8h-3.2L-71.2-14.6L-71.2-14.6z"/>
                <path class="st0" d="M-58.5-20.4V-8h-1.2v-13.5c0-0.7-0.2-1.2-0.5-1.6s-0.9-0.6-1.7-0.6h-0.1v-0.8h1.8c0.9,0,1.7,0.1,2.3,0.4
                    s1.1,0.6,1.5,1.1l8.6,10v-11.5h1.2v16.6h-1.2L-58.5-20.4L-58.5-20.4z"/>
                <path class="st0" d="M-32.1-8.4c-1-0.4-2-1.2-3.1-2.4l-4-4.2V-8h-3.2l0-13.3c0-0.8-0.1-1.5-0.3-1.9s-0.7-0.6-1.4-0.6h-0.2v-0.8h3
                    c0.6,0,1,0.1,1.4,0.3c0.3,0.2,0.6,0.5,0.7,1c0.1,0.5,0.2,1.1,0.2,1.9v4.8l4.3-5.4c0.6-0.8,1.3-1.4,2-1.9c0.7-0.5,1.5-0.7,2.4-0.7
                    h1.8v0.9c-1,0-1.9,0.1-2.7,0.4s-1.4,0.7-1.9,1.4l-3.7,4.6l5.8,6c0.6,0.7,1.3,1.3,2.1,1.8c0.8,0.5,1.4,0.8,1.9,0.9V-8
                    c-0.5,0.2-1.1,0.2-1.8,0.2C-30.2-7.7-31.2-7.9-32.1-8.4L-32.1-8.4z"/>
                <path class="st0" d="M-16.1-8.6c-0.8-0.6-1.5-1.5-2.3-2.8l-2.5-4.2h-1V-8h-3.3v-13.3c0-0.8-0.1-1.5-0.3-1.9
                    c-0.2-0.4-0.7-0.6-1.4-0.6h-0.2v-0.8h6.9c1.7,0,3.2,0.3,4.7,0.9c1.4,0.6,2.1,1.8,2.1,3.6c0,1.2-0.4,2.1-1.1,2.8
                    c-0.7,0.6-1.7,1.1-2.9,1.4l2.6,4.4c1,1.6,2,2.6,3.1,2.7V-8c-0.1,0.1-0.4,0.1-0.7,0.2s-0.7,0.1-1,0.1C-14.5-7.7-15.3-8-16.1-8.6
                    L-16.1-8.6z M-20.4-16.6c0.9,0,1.7-0.3,2.4-0.8c0.7-0.6,1-1.4,1-2.6s-0.3-2.1-1-2.6c-0.7-0.6-1.4-0.8-2.3-0.8
                    c-0.4,0-0.9,0.1-1.6,0.2v6.8L-20.4-16.6L-20.4-16.6z"/>
                <path class="st0" d="M-7.3-8.7c-1.3-0.8-2.2-1.8-2.9-3.1s-1-2.8-1-4.4s0.3-3.1,1-4.5c0.7-1.3,1.7-2.4,2.9-3.1S-4.6-25-3-25
                    s3.1,0.4,4.3,1.1s2.2,1.8,2.9,3.1s1,2.8,1,4.5s-0.3,3.1-1,4.4c-0.7,1.3-1.7,2.4-2.9,3.1C0.1-7.9-1.4-7.5-3-7.5S-6.1-7.9-7.3-8.7z
                    M0.5-10.6c0.8-1.3,1.2-3.2,1.2-5.6s-0.4-4.3-1.2-5.6s-2-2-3.5-2s-2.7,0.7-3.5,2c-0.8,1.3-1.2,3.2-1.2,5.6s0.4,4.3,1.2,5.6
                    c0.8,1.3,2,2,3.5,2S-0.3-9.3,0.5-10.6z"/>
                <path class="st0" d="M9.7-20.4V-8H8.4v-13.5c0-0.7-0.2-1.2-0.5-1.6c-0.3-0.4-0.9-0.6-1.7-0.6H6.1v-0.8h1.8c0.9,0,1.7,0.1,2.3,0.4
                    c0.6,0.2,1.1,0.6,1.5,1.1l8.6,10v-11.5h1.2v16.6h-1.2L9.7-20.4L9.7-20.4z"/>
                <path class="st0" d="M30.3-14.6l-4.4-6.7c-0.5-0.7-1.1-1.3-1.6-1.9c-0.6-0.5-1.2-0.8-1.7-0.9v-0.5h2.7c0.8,0,1.6,0.3,2.3,0.8
                    c0.7,0.5,1.3,1.2,1.8,1.9l3.4,5.1l4.9-7.9h1.6l-5.7,9.2V-8h-3.2L30.3-14.6L30.3-14.6z"/>
                </g>
                <g>
                <path class="st1" d="M47.9-21.3c0-0.8-0.1-1.5-0.4-1.9c-0.2-0.4-0.7-0.6-1.4-0.6h-0.2v-0.8h6.9c1.7,0,3.3,0.3,4.7,1s2.1,2,2.1,4
                    c0,1.3-0.4,2.3-1.1,3c-0.7,0.7-1.5,1.2-2.4,1.4c-0.9,0.2-1.7,0.4-2.5,0.4h-2.4V-8h-3.2L47.9-21.3L47.9-21.3z M52.6-15.7
                    c1,0,1.8-0.3,2.4-0.9c0.6-0.6,0.9-1.6,0.9-3s-0.3-2.4-0.9-3c-0.6-0.6-1.4-0.9-2.3-0.9c-0.5,0-1,0.1-1.6,0.2v7.7H52.6z"/>
                <path class="st1" d="M71.2-8.6c-0.9-0.4-1.5-1.3-2.1-2.6l-0.6-1.4h-6.6L59.8-8h-1.3l7.4-16.5H67l5.6,13.4
                    c0.6,1.6,1.5,2.4,2.6,2.5V-8c-0.3,0.1-0.7,0.1-1.2,0.1C73-7.9,72-8.1,71.2-8.6L71.2-8.6z M68.1-13.7l-2.8-6.5l-2.9,6.5H68.1z"/>
                <path class="st1" d="M79.8-14.6l-4.4-6.7c-0.5-0.7-1.1-1.3-1.6-1.9C73.1-23.7,72.6-24,72-24v-0.5h2.7c0.9,0,1.6,0.3,2.3,0.8
                    c0.7,0.5,1.3,1.2,1.8,1.9l3.4,5.1l4.9-7.9h1.6L83-15.3V-8h-3.2L79.8-14.6L79.8-14.6z"/>
                </g>
            </g>
            </g>
        </svg>
        <div style="display: flex;flex-direction: column; width: 100%;justify-content: center; align-items: center;">
            <div style="display: flex;flex-direction: column; width: 30%;">
            <label style="width: 100%;" for="tokens">Tokens (JSON obj):</label>
            <textarea id="assets" style="width: 100%;" rows="10" name="assets" type="text" >
            {
                "main": { "sign": "#BTC", "units": 10000000 },
                "other": [
                { "sign": "#EURS", "units": 2500 }
                ]
            }
            </textarea>
            </div>
        </div>
        <button type="button" style="margin-top: 15px;border-radius: 20px; background-color: rgb(101, 220, 152);color: white; border: none; font-size: 28px; padding: 15px 25px;cursor: pointer;" onclick="pay()">Start</button>
    </div>

    <script>
        function pay(){
            var assets = JSON.parse(document.getElementById('assets').value)
            var payload = {
                a: "jhghjgjh"
            }
            //call api endpoint to get base58
            fetch('/createIntent', {
                method: 'POST',
                headers: {
                    "Content-type": "application/json"
                },
                body: JSON.stringify({...assets, payload})
            }).then(async res => {
                const data = await res.json()
                //call pay method
                window.SynkronyPay.pay(data.paymentObject).then(data => {
                    fetch('/submitPayment', {
                        method: 'POST',
                        headers: {
                            "Content-type": "application/json"
                        },
                        body: JSON.stringify({base58Bulk: data.data.base58Bulk})
                    }).then(async res => {
                        const d = await res.json()
                        console.log(d)
                    })
                }).catch(console.error)
            })
            //await webhook
        }
    </script>
</body>
</html>